# YouTube双语字幕 Chrome插件

一个Chrome浏览器插件，可以在YouTube视频上显示双语字幕，支持多种翻译语言。

## 功能特性

- ✅ 自动提取YouTube原生字幕
- ✅ 实时翻译字幕到目标语言
- ✅ 双语字幕同时显示（原文+译文）
- ✅ 支持多种显示位置（顶部/底部/覆盖）
- ✅ 可调节字体大小
- ✅ 翻译结果缓存，提升性能
- ✅ 支持多种目标语言

## 技术架构

### 文件结构
```
youtube_subtitles/
├── manifest.json          # Chrome插件配置文件
├── popup.html             # 设置界面HTML
├── popup.js               # 设置界面逻辑
├── background.js          # 后台服务，处理翻译API
├── content.js             # 内容脚本，处理页面交互
├── content.css            # 字幕显示样式
└── README.md              # 项目说明
```

### 核心组件

1. **Content Script (content.js)**
   - 监听YouTube页面字幕变化
   - 提取原始字幕文本
   - 创建和管理双语字幕显示界面
   - 与background script通信获取翻译

2. **Background Script (background.js)**
   - 处理翻译API调用
   - 管理翻译结果缓存
   - 提供翻译服务给content script

3. **Popup Interface (popup.html/js)**
   - 用户设置界面
   - 语言选择、显示位置配置
   - 实时设置同步

4. **Styling (content.css)**
   - 双语字幕显示样式
   - 响应式设计
   - 主题适配

## 安装方法

1. 下载或克隆此项目到本地
2. 打开Chrome浏览器，进入 `chrome://extensions/`
3. 开启"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择项目文件夹
6. 插件安装完成

## 使用方法

1. 在YouTube上打开任意有字幕的视频
2. 点击浏览器工具栏中的插件图标
3. 在弹出的设置面板中：
   - 确保"启用双语字幕"开关已打开
   - 选择目标翻译语言
   - 调整显示位置和字体大小
4. 点击"保存设置"
5. 返回视频页面，即可看到双语字幕显示

## 支持的语言

- 简体中文 (zh-CN)
- 繁体中文 (zh-TW)
- English (en)
- 日本語 (ja)
- 한국어 (ko)
- Español (es)
- Français (fr)
- Deutsch (de)
- Русский (ru)

## 开发计划

- [ ] 支持更多翻译服务API
- [ ] 添加字幕样式自定义
- [ ] 支持字幕导出功能
- [ ] 添加快捷键控制
- [ ] 优化移动端显示

## 技术说明

### 翻译服务
目前使用Google Translate的免费API端点进行翻译。为了提升用户体验：
- 实现了翻译结果缓存机制
- 支持重试机制处理网络错误
- 异步处理避免阻塞界面

### 字幕提取
通过监听YouTube页面DOM变化来提取字幕：
- 使用MutationObserver监听字幕容器变化
- 实时提取当前显示的字幕文本
- 支持不同类型的YouTube字幕格式

### 性能优化
- 翻译结果本地缓存24小时
- 防抖处理避免频繁API调用
- 异步处理保证界面流畅


## 已知问题

- 自动生成英文字幕（逐字追加）在增量阶段仍可能导致译文区域间歇性“翻译中”或轻微闪烁；我们已加入合并/去抖与保留上一版译文的策略，但在部分场景仍未彻底消除。跟踪 Issue: #4。
- 如遇到快速增量的直播/转录视频，建议暂时关闭自动翻译以避免干扰（我们会在后续版本进一步优化该体验）。
- 欢迎在 Issue #4 提供复现场景/视频链接，以便我们验证并收敛策略。

## 许可证

MIT License

## 贡献

欢迎提交Issue和Pull Request来改进这个项目！
