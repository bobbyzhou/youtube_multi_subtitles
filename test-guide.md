# YouTube双语字幕插件测试指南

## 安装步骤

1. **打开Chrome扩展管理页面**
   - 在Chrome地址栏输入：`chrome://extensions/`
   - 或者：菜单 → 更多工具 → 扩展程序

2. **启用开发者模式**
   - 点击右上角的"开发者模式"开关

3. **加载插件**
   - 点击"加载已解压的扩展程序"
   - 选择项目文件夹（包含manifest.json的文件夹）
   - 插件应该出现在扩展列表中

## 配置API Key

1. **获取Google Translate API Key**
   - 访问 [Google Cloud Console](https://console.cloud.google.com/)
   - 创建项目或选择现有项目
   - 启用 Cloud Translation API
   - 创建API密钥

2. **在插件中配置**
   - 点击浏览器工具栏中的插件图标
   - 在弹出的设置面板中输入API Key
   - 选择目标语言（默认：简体中文）
   - 点击"保存设置"

## 测试步骤

### 基础功能测试

1. **打开YouTube视频**
   - 访问任何有英文字幕的YouTube视频
   - 确保视频开启了字幕（CC按钮）

2. **验证双语字幕显示**
   - 应该看到原文字幕和中文翻译同时显示
   - 原文字幕：黑色背景
   - 翻译字幕：蓝色背景

3. **测试实时性**
   - 字幕应该几乎实时出现翻译
   - 没有明显延迟

### 设置功能测试

1. **语言切换测试**
   - 在设置中切换不同的目标语言
   - 验证翻译语言是否正确改变

2. **显示位置测试**
   - 测试"顶部"、"底部"、"覆盖原字幕"三种模式
   - 验证字幕位置是否正确

3. **字体大小测试**
   - 测试小、中、大三种字体大小
   - 验证字幕大小是否改变

4. **缓存时间测试**
   - 设置不同的缓存时间
   - 重复播放相同内容，验证翻译是否从缓存加载

## 常见问题排查

### 1. 插件无法加载
- 检查manifest.json语法是否正确
- 确保所有文件都在正确位置
- 查看Chrome扩展页面的错误信息

### 2. 字幕不显示
- 确保YouTube视频开启了字幕
- 检查浏览器控制台是否有错误信息
- 验证插件是否在YouTube视频页面激活

### 3. 翻译失败
- 检查API Key是否正确配置
- 验证网络连接
- 查看background script的错误日志

### 4. 翻译延迟
- 检查网络速度
- 验证是否启用了缓存
- 考虑使用预翻译模式

## 调试技巧

### 1. 查看控制台日志
```javascript
// 在YouTube页面按F12，查看Console标签
// 应该看到类似的日志：
// "YouTube双语字幕插件初始化..."
// "开始字幕提取..."
```

### 2. 检查扩展背景页面
- 在chrome://extensions/页面
- 点击插件的"检查视图"链接
- 查看background script的日志

### 3. 测试API连接
```javascript
// 在background script控制台中测试：
chrome.runtime.sendMessage({
  type: 'TRANSLATE_TEXT',
  text: 'Hello world',
  targetLanguage: 'zh-CN'
}, console.log);
```

## 性能优化建议

1. **启用预翻译模式**
   - 在设置中开启"预翻译模式"
   - 可以提前翻译即将出现的字幕

2. **合理设置缓存时间**
   - 对于经常观看的内容，设置较长缓存时间
   - 对于一次性内容，可以设置较短缓存时间

3. **使用官方API**
   - 配置Google Translate API Key
   - 比免费端点更稳定、更快速

## 已知限制

1. **字幕格式支持**
   - 主要支持YouTube自动生成和上传的字幕
   - 某些特殊格式可能不支持

2. **语言检测**
   - 目前主要针对英文→中文优化
   - 其他语言组合可能需要调整

3. **视频类型**
   - 仅支持标准YouTube视频页面
   - 不支持嵌入式播放器或其他平台

## 下一步开发

- [ ] 支持更多视频平台
- [ ] 添加字幕导出功能
- [ ] 实现离线翻译
- [ ] 添加用户自定义词典
